<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for scripts/api-explorer/v2/src/components/panels/panelHeading.component.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="..\..\..\..\..\..\prettify.css" />
    <link rel="stylesheet" href="..\..\..\..\..\..\base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(..\..\..\..\..\..\sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="..\..\..\..\..\..\index.html">All files</a> / <a href="index.html">scripts/api-explorer/v2/src/components/panels</a> panelHeading.component.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">97.56% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>40/41</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">64% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>16/25</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>6/6</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>40/40</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span></td><td class="text"><pre class="prettyprint lang-js">import {colorsService} from '../../services';
&nbsp;
class PanelHeading {
	constructor({config = <span class="branch-0 cbranch-no" title="branch not covered" >{},</span> data = <span class="branch-0 cbranch-no" title="branch not covered" >{},</span> showMapPopup = <span class="branch-0 cbranch-no" title="branch not covered" >null,</span> setActive, isExpanded, page, collapseId, colorClass, panelGroup, subjectID}) {
		this.config = config._CONFIG;
		this.setActive = setActive;
		this.isExpanded = isExpanded;
		this._panelName = data.key;
		this.title = this.config &amp;&amp; this.config.title || <span class="branch-2 cbranch-no" title="branch not covered" >this._panelName;</span>
		this.data = data.value;
		this.collapseId = collapseId;
		this.page = page;
		this.panelGroup = panelGroup;
		this.subjectId = subjectID;
		this.showMapPopup = showMapPopup;
		this.init({page, colorClass});
	}
&nbsp;
	init({page, colorClass}) {
		<span class="missing-if-branch" title="else path not taken" >E</span>if (page) {
			this.cardSize = page.size;
		}
		<span class="missing-if-branch" title="else path not taken" >E</span>if (this.config.request) {
			this.anotherRequestColor = colorsService.getRandomColor(colorClass);
		}
	}
&nbsp;
	followRequest(value) {
		let url = Object.getProp(value, '.config.request');
		<span class="missing-if-branch" title="else path not taken" >E</span>if (url) {
			let method = {};
			url = url.split(new RegExp('https://app.ticketmaster.com/'))[1];
			PanelHeading.getDeepProp(url, base, method);
			method = method.object;
&nbsp;
			method.parameters = Object.keys(method.parameters).map(key =&gt; {
				let param = method.parameters[key];
				if (param.name === 'id') {
					param.value = ko.unwrap(this.subjectId);
				} else if (param.name === 'format') {
					param.value = 'json'
				}
				return param;
			});
&nbsp;
&nbsp;
			this.anotherRequest = ko.observable({url, method, panelGroup: this.panelGroup, color: this.anotherRequestColor}).publishOn('ANOTHER_REQUEST');
		}
	}
&nbsp;
	get hasAnotherRequest() {
		return !!this.config.request;
	}
&nbsp;
	static getDeepProp(val, obj, result) {
		<span class="missing-if-branch" title="if path not taken" >I</span>if (typeof obj !== 'object') <span class="cstat-no" title="statement not covered" >return;</span>
&nbsp;
		for (let prop in obj) {
			<span class="missing-if-branch" title="else path not taken" >E</span>if (obj.hasOwnProperty(prop) &amp;&amp; typeof obj[prop] === 'object' &amp;&amp; !result.length) {
				if (obj[prop].path === val) {
					result.object = obj[prop];
					break;
				} else {
					PanelHeading.getDeepProp(val, obj[prop], result);
				}
			}
		}
	}
}
&nbsp;
&nbsp;
ko.components.register('panel-heading', {
	viewModel:  PanelHeading,
	template:`
		&lt;section class="panel-heading"&gt;
			&lt;div class="panel-title"&gt;
				
				&lt;a data-bind="click: setActive, attr: {href: '#' + collapseId, 'aria-controls': collapseId, 'aria-expanded': isExpanded}" class="btn btn-icon btn-title" type="button" data-toggle="collapse" aria-expanded="false"&gt;
					&lt;span class="btn btn-icon shevron white-shevron-up"&gt;&lt;/span&gt;
					&lt;p data-bind="text: title" class="title"&gt;Panel title&lt;/p&gt;
				&lt;/a&gt;
				
				&lt;!-- ko if: _panelName === 'events'--&gt;
					&lt;span data-bind="text: cardSize" class="counter"&gt;&lt;/span&gt;
				&lt;!-- /ko--&gt;
				
				&lt;!-- ko if: _panelName === 'page'--&gt;
					&lt;pagination params="number: data.number, totalPages: data.totalPages, page: page"&gt;&lt;/pagination&gt;
				&lt;!-- /ko--&gt;
				
				&lt;!-- ko if: hasAnotherRequest --&gt;
				&lt;section class="follow-request"&gt;
					&lt;span data-bind="css: anotherRequestColor" class="color-indicator"&gt;&lt;/span&gt;
					&lt;button data-bind="click: followRequest" class="btn btn-request" type="button"&gt;another request&lt;/button&gt;
				&lt;/section&gt;
				&lt;!-- /ko--&gt;
				
				&lt;!-- ko if: _panelName === 'location' --&gt;
				&lt;section class="follow-request"&gt;
					&lt;button class="api-map-btn" data-bind="click: showMapPopup"&gt;&lt;/button&gt;
				&lt;/section&gt;
				&lt;!-- /ko--&gt;
			&lt;/div&gt;
		&lt;/section&gt;
`});
&nbsp;
module.exports = PanelHeading;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri Jul 07 2017 15:50:54 GMT+0300 (FLE Daylight Time)
</div>
</div>
<script src="..\..\..\..\..\..\prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="..\..\..\..\..\..\sorter.js"></script>
</body>
</html>
