{"version":3,"file":"./products-and-docs/widgets/countdown/1.0.0/lib/main-widget.js","sources":["webpack:///webpack/bootstrap bcc8898e2a08f076e7fe","webpack:///./products-and-docs/widgets/countdown/1.0.0/src/classes/CountdownClock.js","webpack:///./products-and-docs/widgets/helpers/widgets-analytics.js","webpack:///./products-and-docs/widgets/countdown/1.0.0/src/classes/TicketmasterCountdownWidget.js","webpack:///products-and-docs/widgets/countdown/1.0.0/src/main-widget.es6"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bcc8898e2a08f076e7fe","export default class eventUrlCountdownClock {\r\n\tset endTime(endTime) { this.config.endTime = endTime; }\r\n\tget endTime(){ return this.config.endTime || new Date();}\r\n\r\n\tset interval(interval) { return this.config.interval = interval; }\r\n\tget interval(){ return this.config.interval || 1000;}\r\n\r\n\tset onChange(fn) { return this.config.onChange = fn; }\r\n\tget onChange(){ return this.config.onChange || ((time) => {})}\r\n\r\n\tconstructor(config = {}) {\r\n\t\tthis.config = config;\r\n\t\tthis.updateClock();\r\n\t\tif(this.config.endTime) this.initInterval();\r\n\t}\r\n\r\n\tinitInterval(){\r\n\t\tthis.timeinterval = setInterval(this.updateClock.bind(this), this.interval);\r\n\t}\r\n\r\n\tupdate(endTime){\r\n\t\tclearInterval(this.timeinterval);\r\n\t\tthis.endTime = endTime;\r\n\t\tthis.updateClock();\r\n\t\tif(endTime) this.initInterval();\r\n\t}\r\n\r\n\tupdateClock() {\r\n\t\tlet timeRemaining = this.getTimeRemaining();\r\n\t\tthis.onChange(timeRemaining);\r\n\t\tif (timeRemaining.total <= 0) clearInterval(this.timeinterval);\r\n\t}\r\n\r\n\t/*\r\n  //Covert datetime by GMT offset\r\n  //If toUTC is true then return UTC time other wise return local time\r\n  convertLocalDateToUTCDate(date, toUTC) {\r\n    date = new Date(date);\r\n    //Local time converted to UTC\r\n    var localOffset = date.getTimezoneOffset() * 60000;\r\n    var localTime = date.getTime();\r\n    (toUTC)\r\n      ? date = localTime + localOffset\r\n      : date = localTime - localOffset;\r\n    date = new Date(date);\r\n    return date;\r\n  }\r\n  */\r\n\r\n\tgetTimeRemaining() {\r\n\t\tlet total = Date.parse(this.endTime) - Date.parse(new Date());\r\n\t\tif(total <= 0) total = 0;\r\n\t\tlet seconds = Math.floor((total / 1000) % 60),\r\n\t\t\tminutes = Math.floor((total / 1000 / 60) % 60),\r\n\t\t\thours = Math.floor((total / 3600000 /* (1000 * 60 * 60) */) % 24),\r\n\t\t\tdays = Math.floor(total / 86400000 /* (1000 * 60 * 60 * 24) */),\r\n\t\t\tmonthLeft = 0;\r\n\t\t//years = 0;\r\n\r\n\t\tlet daysInMonth = function(year,month){\r\n\t\t\tvar D=new Date(year, month-1, 1, 12);\r\n\t\t\treturn parseInt((-Date.parse(D)+D.setMonth(D.getMonth()+1)+36e5)/864e5);\r\n\t\t};\r\n\r\n\t\tlet today = new Date(),\r\n\t\t\tcurr_day = today.getUTCDate(),\r\n\t\t\tcurr_month = today.getUTCMonth(),\r\n\t\t\tcurr_year = today.getUTCFullYear(),\r\n\t\t\tcurr_days_in_month = daysInMonth(curr_year, curr_month);\r\n\r\n\t\tif(days > curr_days_in_month){\r\n\t\t\tlet servYear = new Date(this.endTime).getUTCFullYear(),\r\n\t\t\t\tservMonth = new Date(this.endTime).getUTCMonth(),\r\n\t\t\t\tservDay = new Date(this.endTime).getUTCDate(),\r\n\t\t\t\tserv_days_in_month = daysInMonth(servYear, servMonth);\r\n\r\n\t\t\tmonthLeft = Math.floor( days/daysInMonth(servYear,servMonth) );\r\n\r\n\t\t\tdays = Math.abs(servDay - curr_day);\r\n\r\n\t\t\t/*if(monthLeft > 99){\r\n        years = servYear - curr_year;\r\n        monthLeft = monthLeft-1 - years*12;\r\n        //console.log( 'monthLeft ',monthLeft );\r\n      }*/\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttotal,\r\n\t\t\t//years,\r\n\t\t\tmonthLeft,\r\n\t\t\tdays,\r\n\t\t\thours,\r\n\t\t\tminutes,\r\n\t\t\tseconds\r\n\t\t};\r\n\t}\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./products-and-docs/widgets/countdown/1.0.0/src/classes/CountdownClock.js\n// module id = 0\n// module chunks = 0","const TM_TRACKER_ID = 'UA-78315612-1';\r\n\r\nconst DEVPORT_TRACKER_ID = 'UA-114077619-1';\r\nconst DEVPORT_TRACKER_ALIAS = 'tmOpenPlatform';\r\n\r\nconst EVENT_CATEGORY = {\r\n  MAP_WIDGET: 'MapWidget',\r\n  CALENDAR_WIDGET: 'CalendarWidget',\r\n  COUNTDOWN_WIDGET: 'CountdownWidget',\r\n  EVENT_DISCOVERY_WIDGET: 'EventDiscoveryWidget',\r\n};\r\n\r\nconst EVENT_NAME = {\r\n  RENDERED: 'rendered',\r\n  LOAD: 'load',\r\n};\r\n\r\nconst sendEvent = (widgetCategory, widgetEvent) => {\r\n  ga('send', 'event', widgetCategory, widgetEvent);\r\n  ga(`${DEVPORT_TRACKER_ALIAS}.send`, 'event', widgetCategory, widgetEvent);\r\n};\r\n\r\nconst initialize = (widgetName) => {\r\n  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\r\n    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\r\n    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\r\n  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\r\n\r\n  ga('create', TM_TRACKER_ID, 'auto');\r\n  ga('create', DEVPORT_TRACKER_ID, 'auto', DEVPORT_TRACKER_ALIAS);\r\n\r\n  ga('send', 'pageview');\r\n  ga(`${DEVPORT_TRACKER_ALIAS}.send`, 'event', widgetName, EVENT_NAME.LOAD);\r\n};\r\n\r\nexport default {\r\n  EVENT_CATEGORY,\r\n  EVENT_NAME,\r\n  initialize,\r\n  sendEvent,\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./products-and-docs/widgets/helpers/widgets-analytics.js\n// module id = 1\n// module chunks = 0","import CountdownClock from './CountdownClock';\r\nimport widgetAnalytics from '../../../../helpers/widgets-analytics';\r\n\r\nexport default class TicketmasterCountdownWidget {\r\n\r\n\tset config(attrs) { this.widgetConfig = this.loadConfig(attrs); }\r\n\tget config() { return this.widgetConfig; }\r\n\r\n\tset event(responce){ this.eventResponce = this.parseEvent(responce);}\r\n\tget event(){ return this.eventResponce;}\r\n\r\n\tget borderSize(){ return this.config.border || 0;}\r\n\r\n\tget eventUrl(){ return \"http://www.ticketmaster.com/event/\"; }\r\n\r\n\tset eventId(id){ this.config.id = id;}\r\n\tget eventId(){ return this.config.id;}\r\n\r\n\tget apiUrl(){ return this.config.id ? `https://app.ticketmaster.com/discovery-widgets/v2/events/${this.config.id}.json` : `https://app.ticketmaster.com/discovery-widgets/v2/events/${this.eventId}.json`; }\r\n\r\n\tget themeUrl() {\r\n\t\treturn (window.location.host === 'developer.ticketmaster.com')\r\n\t\t\t? `https://developer.ticketmaster.com/products-and-docs/widgets/countdown/1.0.0/theme/`\r\n\t\t\t: `https://ticketmaster-api-staging.github.io/products-and-docs/widgets/countdown/1.0.0/theme/`;\r\n\t}\r\n\r\n\tget isFullWidth() { return this.config.proportion === 'fullwidth';}\r\n\r\n\tget portalUrl(){\r\n\t\treturn (window.location.host === 'developer.ticketmaster.com')\r\n\t\t\t? `https://developer.ticketmaster.com/`\r\n\t\t\t: `https://ticketmaster-api-staging.github.io/`;\r\n\t}\r\n\r\n\tget logoUrl() { return \"https://www.ticketmaster.com/\"; }\r\n\r\n\tget legalNoticeUrl() { return \"http://developer.ticketmaster.com/support/terms-of-use/\"; }\r\n\r\n\tget widgetVersion() { return `${__VERSION__}`; }\r\n\r\n\tget questionUrl() { return \"http://developer.ticketmaster.com/support/faq/\"; }\r\n\r\n\tget updateExceptions() { return [\"width\", \"height\", \"border\", \"borderradius\", \"layout\", \"propotion\", \"seconds\"]}\r\n\r\n\tget hideMessageDelay(){ return 5000; }\r\n\r\n\tget tmWidgetWhiteList(){ return [\"2200504BAD4C848F\", \"00005044BDC83AE6\", \"1B005068DB60687F\", \"1B004F4DBEE45E47\", \"3A004F4ED7829D5E\", \"3A004F4ED1FC9B63\", \"1B004F4FF83289C5\", \"1B004F4FC0276888\", \"0E004F4F3B7DC543\", \"1D004F4F09C61861\", \"1600505AC9A972A1\", \"22004F4FD82795C6\", \"01005057AFF54574\", \"01005056FAD8793A\", \"3A004F4FB2453240\", \"22004F50D2149AC6\", \"01005059AD49507A\", \"01005062B4236D5D\"]; }\r\n\r\n\t//get eventIdDefault(){ return '1Ad0ZfdGkMoCQHJ';}\r\n\r\n\tisConfigAttrExistAndNotEmpty(attr) {\r\n\t\tif( !this.config.hasOwnProperty(attr) || this.config[attr] === \"undefined\"){\r\n\t\t\treturn false;\r\n\t\t}else if( this.config[attr] === \"\"){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tget eventReqAttrs(){\r\n\t\tlet attrs = {},\r\n\t\t\tparams = [\r\n\t\t\t\t{\r\n\t\t\t\t\tattr: 'tmapikey',\r\n\t\t\t\t\tverboseName: 'apikey'\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\tfor(let i in params){\r\n\t\t\tlet item = params[i];\r\n\t\t\tif(this.isConfigAttrExistAndNotEmpty(item.attr))\r\n\t\t\t\tattrs[item.verboseName] = this.config[item.attr];\r\n\t\t}\r\n\r\n\t\treturn attrs;\r\n\t}\r\n\r\n\tconstructor(root) {\r\n\t\tthis.widgetRoot = root;\r\n\r\n\t\tthis.eventsRootContainer = document.createElement(\"div\");\r\n\t\tthis.eventsRootContainer.classList.add(\"events-root-container\");\r\n\t\tthis.widgetRoot.appendChild(this.eventsRootContainer);\r\n\r\n\t\tthis.eventsRoot = document.createElement(\"ul\");\r\n\t\tthis.eventsRoot.classList.add(\"events-root\");\r\n\t\tthis.eventsRootContainer.appendChild(this.eventsRoot);\r\n\r\n\t\tthis.config = this.widgetRoot.attributes;\r\n\t\tthis.eventId = this.config.id;\r\n\r\n\t\tif(this.config.theme !== null && !document.getElementById(`widget-theme-${this.config.theme}`)){\r\n\t\t\tthis.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\r\n\t\t}\r\n\r\n\t\tthis.widgetRoot.style.height = `${this.config.height}px`;\r\n\t\tthis.widgetRoot.style.width  = `${this.config.width}px`;\r\n\r\n\t\tthis.eventsRootContainer.style.height = `${this.config.height}px`;\r\n\t\tthis.eventsRootContainer.style.width  = `${this.config.width}px`;\r\n\t\tthis.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\r\n\t\tthis.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\r\n\r\n\t\tthis.initBuyBtn();\r\n\r\n\t\tthis.AdditionalElements();\r\n\r\n\t\tthis.initMessage();\r\n\r\n\t\tthis.buildCountdown();\r\n\r\n\t\tif(this.apiUrl){\r\n\t\t\tthis.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\r\n\t\t}else{\r\n\t\t\tthis.showMessage(\"Please enter event ID.\", true, null );\r\n\t\t}\r\n\r\n\t\tthis.embedUniversePlugin();\r\n\t\tthis.embedTMPlugin();\r\n\r\n\t\tthis.countDownWrapper.classList.add(\"events-count-down\");\r\n\r\n\t\tthis.countdownClock = new CountdownClock({\r\n\t\t\tonChange: this.onCountdownChange.bind(this)\r\n\t\t});\r\n\r\n\t\tthis.toggleSecondsVisibility();\r\n\r\n\t\tif (this.isFullWidth) { this.initFullWidth(); }\r\n\r\n    widgetAnalytics.sendEvent(widgetAnalytics.EVENT_CATEGORY.COUNTDOWN_WIDGET, widgetAnalytics.EVENT_NAME.RENDERED);\r\n\t}\r\n\r\n\tgetNormalizedDateValue(val){\r\n\t\treturn (val < 0 || val > 9 ? \"\" : \"0\") + val\r\n\t}\r\n\r\n\ttoggleSecondsVisibility(){\r\n\t\tif(this.countDownMonth.innerHTML > 0){\r\n\t\t\tthis.countDownWrapper.classList.add(\"hide-seconds\");\r\n\t\t\tthis.countDownWrapper.classList.remove(\"hide-days\");\r\n\t\t\tthis.countDownWrapper.classList.remove(\"hide-month\");//Removing a class that does not exist, does NOT throw an error\r\n\t\t}else if(this.countDownDays.innerHTML <= 0){\r\n\t\t\tthis.countDownWrapper.classList.add(\"hide-month\");\r\n\t\t\tthis.countDownWrapper.classList.add(\"hide-days\");\r\n\t\t\tthis.countDownWrapper.classList.remove(\"hide-seconds\");\r\n\t\t}else {\r\n\t\t\tthis.countDownWrapper.classList.add(\"hide-month\");\r\n\t\t\tthis.countDownWrapper.classList.remove(\"hide-days\");\r\n\t\t\tthis.countDownWrapper.classList.remove(\"hide-seconds\");\r\n\t\t}\r\n\t}\r\n\r\n\tshowStatusMessage(data){\r\n\t\tlet me = this;\r\n\t\tif(this.event.date && this.event.date.dateTime){\r\n\t\t\tchenHeaderEvent(this.event.date);\r\n\t\t}\r\n\r\n\t\tfunction chenHeaderEvent(eventT){\r\n\t\t\tlet now = new Date(),\r\n\t\t\t\tmsecsNow = Date.parse(now),\r\n\t\t\t\teventDateStart = new Date(eventT.dateTime),\r\n\t\t\t\tmsecsStart = Date.parse(eventDateStart),\r\n\t\t\t\teventDateEnd = new Date(eventT.dateTimeEnd),\r\n\t\t\t\tmsecsEnd = Date.parse(eventDateEnd);\r\n\r\n\t\t\tif (msecsNow > msecsEnd || isNaN(msecsEnd)) {\r\n\t\t\t\tme.showMessage(`This event has taken place`, false , \"event-message-started\");\r\n\t\t\t} else if (msecsStart < msecsNow < msecsEnd) {\r\n\t\t\t\tme.showMessage(`Event is in progress`, false , \"event-message-started\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonCountdownChange(data){\r\n\t\tlet timeLeft = this.getNormalizedDateValue(data.total),\r\n\t\t\tnow = Date.parse( new Date() );\r\n\r\n\t\t/*toggle CountDown-Box Visibility*/\r\n\t\tif(timeLeft <= 0 || now < timeLeft){\r\n\t\t\tthis.countDownWrapper.classList.add(\"hide-countDownBox\");\r\n\t\t\tif(this.eventId && this.event){\r\n\t\t\t\tthis.showStatusMessage(data);\r\n\t\t\t\treturn false; //exit if event has taken place\r\n\t\t\t}\r\n\t\t}else this.countDownWrapper.classList.remove(\"hide-countDownBox\");\r\n\r\n\t\tif(data.monthLeft > 99){\r\n\t\t\tthis.showMessage(`This event starts in more than ${data.monthLeft} month, ${data.days} days, ${data.hours} hours`, false , \"event-message-started\");\r\n\t\t\tthis.countDownWrapper.classList.add(\"hide-countDownBox\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.countDownMonth.innerHTML = this.getNormalizedDateValue(data.monthLeft);\r\n\t\tthis.countDownDays.innerHTML = this.getNormalizedDateValue(data.days);\r\n\t\tthis.countDownHours.innerHTML = this.getNormalizedDateValue(data.hours);\r\n\t\tthis.countDownMinute.innerHTML = this.getNormalizedDateValue(data.minutes);\r\n\t\tthis.countDownSecond.innerHTML = this.getNormalizedDateValue(data.seconds);\r\n\r\n\t\tthis.toggleSecondsVisibility();\r\n\r\n\t}\r\n\r\n\tbuildCountdown(){\r\n\t\tthis.countDownWrapper = document.createElement(\"div\");\r\n\t\tthis.countDownWrapper.classList.add(\"events-count-down\");\r\n\t\tthis.countDownMonth = document.createElement(\"span\");\r\n\t\tthis.countDownDays = document.createElement(\"span\");\r\n\t\tthis.countDownHours = document.createElement(\"span\");\r\n\t\tthis.countDownMinute = document.createElement(\"span\");\r\n\t\tthis.countDownSecond = document.createElement(\"span\");\r\n\r\n\t\tthis.countDownMonth.innerHTML = '00';\r\n\t\tthis.countDownDays.innerHTML = '00';\r\n\t\tthis.countDownHours.innerHTML = '00';\r\n\t\tthis.countDownMinute.innerHTML = '00';\r\n\t\tthis.countDownSecond.innerHTML = '00';\r\n\r\n\t\tthis.countDownMonth.classList.add(\"events-count-down__month\");\r\n\t\tthis.countDownDays.classList.add(\"events-count-down__day\");\r\n\t\tthis.countDownHours.classList.add(\"events-count-down__hour\");\r\n\t\tthis.countDownMinute.classList.add(\"events-count-down__minute\");\r\n\t\tthis.countDownSecond.classList.add(\"events-count-down__second\");\r\n\r\n\t\tthis.countDownWrapper.appendChild(this.countDownMonth);\r\n\t\tthis.countDownWrapper.appendChild(this.countDownDays);\r\n\t\tthis.countDownWrapper.appendChild(this.countDownHours);\r\n\t\tthis.countDownWrapper.appendChild(this.countDownMinute);\r\n\t\tthis.countDownWrapper.appendChild(this.countDownSecond);\r\n\r\n\t\tthis.eventsRootContainer.appendChild(this.countDownWrapper);\r\n\t}\r\n\r\n\tinitBuyBtn(){\r\n\t\tthis.buyBtn = document.createElement(\"a\");\r\n\t\tthis.buyBtn.appendChild(document.createTextNode('BUY NOW'));\r\n\t\tthis.buyBtn.classList.add(\"event-buy-btn\");\r\n\t\tthis.buyBtn.target = '_blank';\r\n\t\tthis.buyBtn.href = '';\r\n\t\tthis.buyBtn.addEventListener('click', (e) => {\r\n\t\t\te.preventDefault();\r\n      ga('send', 'event', 'CountdownClickBuyButton', 'click');\r\n      ga('tmOpenPlatform.send', 'event', 'MapWidget', 'buyButtonClick');\r\n\t\t});\r\n\t\tthis.eventsRootContainer.appendChild(this.buyBtn);\r\n\t}\r\n\r\n\tupdateTransition(url) {\r\n\t\tvar el = this.eventsRootContainer.querySelector(\".event-logo.centered-logo\");\r\n\t\tif(url !=='') {\r\n\t\t\tif(el){\r\n\t\t\t\tel.classList.add(\"right-logo\");\r\n\t\t\t\tel.classList.remove(\"centered-logo\");\r\n\t\t\t}else return;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tel = this.eventsRootContainer.querySelector(\".event-logo.right-logo\");\r\n\t\t\tif(el){\r\n\t\t\t\tel.classList.remove(\"right-logo\");\r\n\t\t\t\tel.classList.add(\"centered-logo\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetBuyBtnUrl(){\r\n\t\tif(this.buyBtn){\r\n\t\t\tlet event = this.event,\r\n\t\t\t\turl = '';\r\n\t\t\tif(event){\r\n\t\t\t\tif(event.url){\r\n\t\t\t\t\tif((this.isUniversePluginInitialized && this.isUniverseUrl(event.url)) || (this.isTMPluginInitialized && this.isAllowedTMEvent(event.url))){\r\n\t\t\t\t\t\turl = event.url;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.updateTransition(url);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.buyBtn.href = url;\r\n\t\t}\r\n\t}\r\n\r\n\tisUniverseUrl(url){\r\n\t\treturn (url.match(/universe.com/g) || url.match(/uniiverse.com/g));\r\n\t}\r\n\r\n\tisAllowedTMEvent(url){\r\n\t\tfor (var t = [/(?:ticketmaster\\.com)\\/(.*\\/)?event\\/([^\\/?#]+)/, /(?:concerts\\.livenation\\.com)\\/(.*\\/)?event\\/([^\\/?#]+)/], n = null, r = 0; r < t.length && (n = url.match(t[r]), null === n); r++);\r\n\t\tlet id = (null !== n ? n[2] : void 0);\r\n\t\treturn (this.tmWidgetWhiteList.indexOf(id) > -1);\r\n\t}\r\n\r\n\tembedTMPlugin(){\r\n\t\tlet id = 'id_tm_widget';\r\n\t\tif( !document.getElementById(id) ) {\r\n\t\t\tlet script = document.createElement('script');\r\n\t\t\tscript.setAttribute('src', this.portalUrl + 'scripts/vendors/tm.js');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('charset', 'UTF-8');\r\n\t\t\tscript.setAttribute('id', id);\r\n\t\t\t(document.head || document.getElementsByTagName('head')[0]).appendChild(script);\r\n\t\t}\r\n\t\tthis.isTMPluginInitialized = true;\r\n\t}\r\n\r\n\tembedUniversePlugin(){\r\n\t\tlet id = 'id_universe_widget';\r\n\t\tif( !document.getElementById(id) ){\r\n\t\t\tlet script = document.createElement('script');\r\n\t\t\tscript.setAttribute('src', 'https://www.universe.com/embed.js');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('charset', 'UTF-8');\r\n\t\t\tscript.setAttribute('id', id);\r\n\t\t\t(document.head || document.getElementsByTagName('head')[0]).appendChild(script);\r\n\t\t}\r\n\t\tthis.isUniversePluginInitialized = true;\r\n\t}\r\n\r\n\t// Message\r\n\tinitMessage(){\r\n\t\tthis.messageDialog = document.createElement('div');\r\n\t\tthis.messageDialog.classList.add(\"event-message\");\r\n\t\tthis.messageContent = document.createElement('div');\r\n\t\tthis.messageContent.classList.add(\"event-message__content\");\r\n\r\n\t\t/*let messageClose = document.createElement('div');\r\n    messageClose.classList.add(\"event-message__btn\");\r\n    messageClose.addEventListener(\"click\", ()=> {\r\n      this.hideMessage();\r\n    });*/\r\n\r\n\t\tthis.messageDialog.appendChild(this.messageContent);\r\n\t\t/*this.messageDialog.appendChild(messageClose);*/\r\n\t\tthis.eventsRootContainer.appendChild(this.messageDialog);\r\n\t}\r\n\r\n\tshowMessage(message, hideMessageWithoutDelay , /*string togleClassName*/className ){\r\n\t\tif(message.length){\r\n\t\t\tthis.hideMessageWithoutDelay = hideMessageWithoutDelay;\r\n\t\t\tthis.messageContent.innerHTML = message;\r\n\t\t\tthis.messageDialog.className = \"\";\r\n\t\t\tthis.messageDialog.classList.add(\"event-message\");\r\n\t\t\tthis.messageDialog.classList.add(\"event-message-visible\");\r\n\t\t\t// this.messageDialog.classList.remove(\"event-message-started\");\r\n\t\t}\r\n\r\n\t\tif( className ){\r\n\t\t\tthis.messageDialog.classList.add(className);\r\n\t\t}else {\r\n\t\t\tthis.messageDialog.classList.add(\"event-message-visible\");\r\n\t\t\tthis.messageDialog.classList.remove(className);\r\n\t\t}\r\n\r\n\t\tclassName = null;\r\n\r\n\t}\r\n\r\n\thideMessage(){\r\n\t\tif(this.messageTimeout) clearTimeout(this.messageTimeout); // Clear timeout and hide message immediately.\r\n\t\tthis.messageDialog.classList.remove(\"event-message-visible\");\r\n\t}\r\n\t// End message\r\n\r\n\tAdditionalElements(){\r\n\t\tvar legalNoticeContent = document.createTextNode('Legal Notice'),\r\n\t\t\tlegalNotice = document.createElement(\"a\");\r\n\t\tlegalNotice.appendChild(legalNoticeContent);\r\n\t\tlegalNotice.classList.add(\"legal-notice\");\r\n\t\tlegalNotice.target = '_blank';\r\n\t\tlegalNotice.href = this.legalNoticeUrl;\r\n\t\tthis.widgetRoot.appendChild(legalNotice);\r\n\r\n\t\tvar logo = document.createElement('a');\r\n\t\tlogo.classList.add(\"event-logo\",\"centered-logo\");\r\n\t\tlogo.target = '_blank';\r\n\t\tlogo.href = this.logoUrl;\r\n\t\tlogo.innerHTML = 'Powered by ';\r\n\r\n\t\tvar logoBox = document.createElement('div');\r\n\t\tlogoBox.classList.add(\"event-logo-box\");\r\n\t\tlogoBox.appendChild(logo);\r\n\t\tthis.eventsRootContainer.appendChild(logoBox);\r\n\r\n\t\tlet question = document.createElement('span'),\r\n\t\t\ttoolTip = document.createElement('div'),\r\n\t\t\ttooltipHtml = `\r\n\t\t\t\t<div class=\"tooltip-inner\"> \r\n\t\t\t\t\t<a href=\"${this.questionUrl}\" target = \"_blank\" >About widget</a>\r\n\t\t\t\t\t<div class=\"place\">version: <b>${this.widgetVersion}</b></div>\r\n\t\t\t\t</div>`;\r\n\t\tquestion.classList.add(\"event-question\");\r\n\t\tquestion.addEventListener('click', toolTipHandler);\r\n\t\ttoolTip.classList.add(\"tooltip-version\");\r\n\t\ttoolTip.classList.add(\"left\");\r\n\t\ttoolTip.innerHTML = tooltipHtml;\r\n\t\tthis.eventsRootContainer.appendChild(question);\r\n\t\tthis.eventsRootContainer.appendChild(toolTip);\r\n\r\n\t\tfunction toolTipHandler(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.target.nextSibling.classList.toggle('show-tip');\r\n\t\t}\r\n\t}\r\n\r\n\tformatDate(date) {\r\n\t\tvar result = '';\r\n\t\tif(!date.day) return result; // Day is required\r\n\r\n\t\tvar MONTH_NAMES = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],\r\n\t\t\tDAY_NAMES = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\r\n\t\t\tdayArray = date.day.split('-'),\r\n\t\t\td = parseInt(dayArray[2]),\r\n\t\t\tM = parseInt(dayArray[1]);\r\n\r\n\t\t// var E = new Date(date.day).getDay();\r\n\t\tvar E = new Date(+date.day.split('-')[0],(+date.day.split('-')[1])-1,+date.day.split('-')[2]).getDay();\r\n\t\tresult = DAY_NAMES[E] + ', ' + MONTH_NAMES[M - 1] + ' ' + d + ', ' + dayArray[0];\r\n\r\n\t\tif(!date.time) return result;\r\n\r\n\t\tvar timeArray = date.time.split(':'),\r\n\t\t\tH = parseInt(timeArray[0]),\r\n\t\t\tm = timeArray[1],\r\n\t\t\ta = \"AM\";\r\n\r\n\t\tif (H > 11) a = \"PM\";\r\n\t\tif (H === 0) {\r\n\t\t\tH = 12;\r\n\t\t} else if (H > 12) {\r\n\t\t\tH = H - 12;\r\n\t\t}\r\n\r\n\t\treturn result + ' ' + this.getNormalizedDateValue(H) + ':' + m + ' ' + a;\r\n\t}\r\n\r\n\tclearEvents(){\r\n\t\tthis.eventsRoot.innerHTML = \"\";\r\n\t}\r\n\r\n\tclear(){\r\n\t\tvar modificatorList = this.widgetRoot.getElementsByClassName('modificator');\r\n\t\twhile (modificatorList.length) {\r\n\t\t\tlet el = modificatorList[0],\r\n\t\t\t\tparent = el.parentNode;\r\n\t\t\tparent.removeChild(el);\r\n\t\t}\r\n\t\tthis.clearEvents();\r\n\t}\r\n\r\n\tupdate(isFullWidthTheme) {\r\n\r\n\t\tlet oldTheme = this.config.constructor();\r\n\t\tfor (let attr in this.config) {\r\n\t\t\tif (this.config.hasOwnProperty(attr)) oldTheme[attr] = this.config[attr];\r\n\t\t}\r\n\r\n\t\tthis.config = this.widgetRoot.attributes;\r\n\t\tthis.widgetRoot.style.height = `${this.config.height}px`;\r\n\t\tthis.widgetRoot.style.width  = `${this.config.width}px`;\r\n\t\tthis.eventsRootContainer.style.height = `${this.config.height}px`;\r\n\t\tthis.eventsRootContainer.style.width  = `${this.config.width}px`;\r\n\t\tthis.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\r\n\t\tthis.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\r\n\r\n\r\n\r\n\t\tif(this.needToUpdate(this.config, oldTheme, this.updateExceptions) || isFullWidthTheme){\r\n\t\t\tthis.clear();\r\n\r\n\t\t\tif(this.config.theme !== null){\r\n\t\t\t\t//set new styles\r\n\t\t\t\tthis.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\r\n\t\t\t}\r\n\r\n\t\t\tif(this.widgetConfig.theme !== 'simple_countdown') {\r\n\t\t\t\tlet heightStatic = '700px';\r\n\t\t\t\t//draw inline style\r\n\t\t\t\t//border\r\n\t\t\t\tthis.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\r\n\t\t\t\tthis.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\r\n\r\n\t\t\t\t//set width\r\n\t\t\t\tthis.widgetRoot.style.width = `100%`;\r\n\t\t\t\tthis.widgetRoot.style.height = heightStatic;\r\n\t\t\t\tthis.widgetRoot.style.display = `block`;\r\n\t\t\t\tthis.eventsRootContainer.style.width  = `100%`;\r\n\t\t\t\tthis.eventsRootContainer.style.height = heightStatic;\r\n\t\t\t\tthis.widgetConfig.width = `100%`;\r\n\t\t\t}\r\n\r\n\t\t\t/*if( this.themeModificators.hasOwnProperty( this.widgetConfig.theme ) ) {\r\n        this.themeModificators[ this.widgetConfig.theme ]();\r\n      }*/\r\n\r\n\t\t\tif(this.apiUrl && this.eventId){\r\n\t\t\t\tthis.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\r\n\t\t\t}else{\r\n\t\t\t\t// this.showMessage(\"No results were found.\", true);\r\n\t\t\t\tthis.showMessage(\"No events were found\", true, 'cactus');\r\n\t\t\t\tthis.countdownClock.update(null);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tlet events = this.widgetRoot.getElementsByClassName(\"event-wrapper\");\r\n\t\t\tfor(let i in events){\r\n\t\t\t\tif(events.hasOwnProperty(i) && events[i].style !== undefined){\r\n\t\t\t\t\tevents[i].style.width = `${this.config.width - this.borderSize * 2}px`;\r\n\t\t\t\t\tevents[i].style.height = `${this.config.height - this.borderSize * 2}px`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isFullWidth) { this.initFullWidth(); }\r\n\t\t//this.toggleSecondsVisibility();\r\n\t}\r\n\r\n\tneedToUpdate(newTheme, oldTheme, forCheck = []){\r\n\t\treturn Object.keys(newTheme).map(function(key){\r\n\t\t\tif(forCheck.indexOf(key) > -1) return true;\r\n\t\t\t//console.warn([key, newTheme[key], oldTheme[key], newTheme[key] === oldTheme[key]])\r\n\t\t\treturn newTheme[key] === oldTheme[key] ;\r\n\t\t}).indexOf(false) > -1\r\n\t}\r\n\r\n\tloadConfig(NamedNodeMap){\r\n\t\tvar config = {};\r\n\t\tObject.keys(NamedNodeMap).map(function(value){\r\n\t\t\tif( typeof(NamedNodeMap[value].name) !== \"undefined\" && NamedNodeMap[value].name.indexOf(\"w-\") !== -1){\r\n\t\t\t\tconfig[ NamedNodeMap[value].name.replace(/w-/g, \"\").replace(/-/g, \"\") ] = NamedNodeMap[value].value;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn config;\r\n\t}\r\n\r\n\tstyleLoadingHandler(){\r\n\t\tif (this && this.readyState == XMLHttpRequest.DONE ) {\r\n\t\t\tif(this.status == 200){\r\n\t\t\t\tvar style = document.createElement(\"style\");\r\n\t\t\t\tstyle.setAttribute(\"type\",\"text/css\");\r\n\t\t\t\tstyle.setAttribute(\"id\",`widget-theme-${this.widget.config.theme}`);\r\n\t\t\t\tstyle.textContent = this.responseText;\r\n\t\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(style);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.info(\"theme wasn't loaded\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonEventLoadError(status,loadOnce){\r\n\t\tthis.event = false;\r\n\t\tthis.showMessage(\"No results were found.\", true, null);\r\n\t\tconsole.log(`There was an error status - ${status}`);\r\n\t\tif(!loadOnce) {\r\n\t\t\tthis.changeDefaultId();\r\n\t\t}\r\n\t}\r\n\r\n\teventsLoadingHandler(){\r\n\t\tlet widget = this.widget;\r\n\t\twidget.clearEvents(); // Additional clearing after each loading\r\n\t\tif (this && this.readyState == XMLHttpRequest.DONE ) {\r\n\t\t\tif(this.status == 200){\r\n\t\t\t\twidget.event = JSON.parse(this.responseText);\r\n\t\t\t\tif(widget.event){\r\n\t\t\t\t\twidget.publishEvent(widget.event);\r\n\t\t\t\t\twidget.hideMessage();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(this.status == 400) {\r\n\t\t\t\twidget.onEventLoadError.call(widget, this.status);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\twidget.onEventLoadError.call(widget, this.status);\r\n\t\t\t}\r\n\t\t\t// http://js2coffee.thomaskalka.de/ - widget.event?.date?.dateTime\r\n\t\t\tlet _ref, _ref2;\r\n\t\t\twidget.countdownClock.update((_ref = widget.event) != null ? (_ref2 = _ref.date) != null ? _ref2.dateTime || _ref2.day : void 0 : void 0);\r\n\t\t}\r\n\t\twidget.setBuyBtnUrl();\r\n\t}\r\n\r\n\tpublishEvent(event, parentNode){\r\n\t\tparentNode = parentNode || this.eventsRoot;\r\n\t\tlet DOMElement = this.createDOMItem(event);\r\n\t\tparentNode.appendChild(DOMElement);\r\n\t}\r\n\r\n\tgetImageForEvent(images){\r\n\t\tvar width = this.config.width,\r\n\t\t\theight = this.config.height;\r\n\r\n\t\tif(width === '100%') { width = this.widgetRoot.offsetWidth }\r\n\t\timages.sort(function(a,b) {\r\n\t\t\tif (a.width < b.width)\r\n\t\t\t\treturn -1;\r\n\t\t\telse if (a.width > b.width)\r\n\t\t\t\treturn 1;\r\n\t\t\telse\r\n\t\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\tvar myImg = \"\";\r\n\t\timages.forEach(function(element){\r\n\t\t\tif(element.width >= width && element.height >= height && !myImg){\r\n\t\t\t\tmyImg = element.url;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif(myImg === \"\") {\r\n\t\t\tmyImg = images[images.length-1].url;\r\n\t\t}\r\n\t\treturn myImg;\r\n\t}\r\n\r\n\tparseEvent(eventSet){\r\n\t\tif(!eventSet.id){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet currentEvent = {};\r\n\r\n\t\tcurrentEvent.id = eventSet.id;\r\n\t\tcurrentEvent.url = eventSet.url;\r\n\t\tcurrentEvent.name = eventSet.name;\r\n\r\n\t\tcurrentEvent.date = {\r\n\t\t\tday: eventSet.dates.start.localDate,\r\n\t\t\ttime: eventSet.dates.start.localTime,\r\n\t\t\tdateTime: eventSet.dates.start.dateTime\r\n\t\t};\r\n\r\n\t\tif(eventSet.dates.end){\r\n\t\t\t(eventSet.dates.end.localDate) ? currentEvent.date.dayEnd = eventSet.dates.end.localDate : '';\r\n\t\t\t(eventSet.dates.end.localTime) ? currentEvent.date.timeEnd = eventSet.dates.end.localTime : '';\r\n\t\t\t(eventSet.dates.end.dateTime) ? currentEvent.date.dateTimeEnd = eventSet.dates.end.dateTime : '';\r\n\t\t}\r\n\r\n\t\tif(eventSet.hasOwnProperty('_embedded') && eventSet._embedded.hasOwnProperty('venues')){\r\n\t\t\tlet venue = eventSet._embedded.venues[0];\r\n\t\t\tif(venue){\r\n\t\t\t\tif(venue.address)\r\n\t\t\t\t\tcurrentEvent.address = venue.address;\r\n\r\n\t\t\t\tif(venue.name){\r\n\t\t\t\t\tif(!currentEvent.address) currentEvent.address = {};\r\n\t\t\t\t\tcurrentEvent.address.name = venue.name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcurrentEvent.img = this.getImageForEvent(eventSet.images);\r\n\t\treturn currentEvent;\r\n\t}\r\n\r\n\tchangeDefaultId(){\r\n\t\tDate.prototype.addDays = function(days) {\r\n\t\t\tthis.setDate(this.getDate() + parseInt(days));\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tlet zipVegas='89109',\r\n\t\t\turl=`https://app.ticketmaster.com/discovery-widgets/v2/events.json`,\r\n\t\t\tnewAttr = Object.assign({},this.eventReqAttrs),\r\n\t\t\td = new Date(0),\r\n\t\t\tconvertedNewStartDate;\r\n\r\n\t\td.setUTCSeconds(Math.round(new Date().addDays(30).getTime())/1000);\r\n\t\tconvertedNewStartDate = d.toJSON().slice(0,17)+'00Z';\r\n\t\tif(d.toJSON().length <= 20) convertedNewStartDate = d.toJSON();\r\n\t\tnewAttr.startDateTime = convertedNewStartDate;\r\n\t\tnewAttr.zipcode = zipVegas;\r\n\r\n\t\tthis.makeRequest(this.changeDefaultIdHandler, url, newAttr );\r\n\t}\r\n\r\n\tchangeDefaultIdHandler(){\r\n\t\tfunction getValidId(events){\r\n\t\t\tlet id = '',\r\n\t\t\t\tnewStartDate = new Date().addDays(30);\r\n\r\n\t\t\tfor(let ii=0;ii<events.length;ii++){\r\n\t\t\t\tif ( Math.round(new Date(events[ii].dates.start.dateTime).getTime()/1000) >= Math.round(new Date(newStartDate).getTime()/1000) ){\r\n\t\t\t\t\tid = events[ii].id;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn id;\r\n\t\t}\r\n\t\tfunction setEventId(){\r\n\t\t\treturn ()=> this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\r\n\t\t}\r\n\t\tlet widget = this.widget;\r\n\t\tlet loadOnce = false;\r\n\t\twidget.clearEvents(); // Additional clearing after each loading\r\n\r\n\t\tif (this && this.readyState == XMLHttpRequest.DONE ) {\r\n\t\t\tif(this.status == 200){\r\n\t\t\t\tlet eventsWrap = JSON.parse(this.responseText);\r\n\t\t\t\tif(eventsWrap){\r\n\t\t\t\t\tlet events = eventsWrap['_embedded']['events'],\r\n\t\t\t\t\t\tnewId = getValidId(events);\r\n\t\t\t\t\twidget.eventId = newId;\r\n\t\t\t\t\tif(document.getElementById('w-id')){\r\n\t\t\t\t\t\tdocument.getElementById('w-id').value = widget.eventId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetEventId.call(widget,newId)();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(this.status == 400) {\r\n\t\t\t\tloadOnce = true;\r\n\t\t\t\twidget.onEventLoadError.call(widget, this.status,loadOnce);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.log('this error',this);\r\n\t\t\t\tloadOnce = true;\r\n\t\t\t\twidget.onEventLoadError.call(widget, this.status,loadOnce);\r\n\t\t\t}\r\n\t\t\t// http://js2coffee.thomaskalka.de/ - widget.event?.date?.dateTime\r\n\t\t\tlet _ref, _ref2;\r\n\t\t\twidget.countdownClock.update((_ref = widget.event) != null ? (_ref2 = _ref.date) != null ? _ref2.dateTime || _ref2.day : void 0 : void 0);\r\n\t\t}\r\n\t\twidget.setBuyBtnUrl();\r\n\r\n\t}\r\n\r\n\tmakeRequest(handler, url=this.apiUrl, attrs={}, method=\"GET\"){\r\n\t\tattrs = Object.keys(attrs).map(function(key){\r\n\t\t\treturn `${key}=${attrs[key]}`;\r\n\t\t}).join(\"&\");\r\n\r\n\t\turl = [url,attrs].join(\"?\");\r\n\r\n\t\tthis.xmlHTTP = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n\t\tif(method == \"POST\") {\r\n\t\t\tthis.xmlHTTP.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\r\n\t\t}\r\n\t\tthis.xmlHTTP.widget = this;\r\n\t\tthis.xmlHTTP.onreadystatechange = handler;\r\n\t\tthis.xmlHTTP.open(method, url, true);\r\n\t\tthis.xmlHTTP.send();\r\n\t}\r\n\r\n\tinitPretendedLink(el, url, isBlank){\r\n\t\tif(el && url){\r\n\t\t\tel.setAttribute('data-url', url);\r\n\t\t\tel.classList.add(\"event-pretended-link\");\r\n\t\t\tel.addEventListener('click', function(){\r\n\t\t\t\tlet url = this.getAttribute('data-url');\r\n\t\t\t\tif(url){\r\n\t\t\t\t\tlet win = window.open(url, (isBlank ? '_blank' : '_self'));\r\n\t\t\t\t\twin.focus();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitFullWidth(){\r\n\t\tlet heightStatic = 700;\r\n\t\tthis.config.width = `100%`;\r\n\t\tthis.config.height = heightStatic;\r\n\t\tthis.widgetRoot.style.width = `100%`;\r\n\t\tthis.widgetRoot.style.height = heightStatic + 'px';\r\n\t\tthis.widgetRoot.style.display = `block`;\r\n\t\tthis.eventsRootContainer.style.width  = `100%`;\r\n\t\tthis.eventsRootContainer.style.height = `${this.widgetContentHeight}px`;\r\n\t}\r\n\r\n\tcreateDOMItem(itemConfig){\r\n\t\tvar medWrapper = document.createElement(\"div\");\r\n\t\tmedWrapper.classList.add(\"event-content-wraper\");\r\n\r\n\t\tvar event = document.createElement(\"li\");\r\n\t\tevent.classList.add(\"event-wrapper\");\r\n\t\tevent.style.height = `${this.config.height - this.borderSize * 2}px`;\r\n\t\tevent.style.width  = (!this.isFullWidth) ? `${this.config.width - this.borderSize * 2}px` : `100%`;\r\n\r\n\t\tvar image = document.createElement(\"span\");\r\n\t\timage.classList.add(\"bg-cover\");\r\n\t\timage.style.backgroundImage = `url('${itemConfig.img}')`;\r\n\t\tevent.appendChild(image);\r\n\r\n\t\tvar nameContent = document.createTextNode(itemConfig.name),\r\n\t\t\tname = document.createElement(\"span\");\r\n\t\tname.classList.add(\"event-name\");\r\n\t\tname.appendChild(nameContent);\r\n\t\tthis.initPretendedLink(name, itemConfig.url, true);\r\n\t\tname.addEventListener('click', function(e) {\r\n      e.preventDefault();\r\n      ga('send', 'event', 'CountDownClickeventName', 'click', itemConfig.url);\r\n      ga('tmOpenPlatform.send', 'event', 'MapWidget', 'eventNameClick', itemConfig.url);\r\n    })\r\n\t\tmedWrapper.appendChild(name);\r\n\r\n\t\tvar dateTimeContent = document.createTextNode(this.formatDate(itemConfig.date)),\r\n\t\t\tdateTime = document.createElement(\"span\");\r\n\t\tdateTime.classList.add(\"event-date\");\r\n\t\tdateTime.appendChild(dateTimeContent);\r\n\r\n\t\tvar dateWraper = document.createElement(\"span\");\r\n\t\tdateWraper.classList.add(\"event-date-wraper\");\r\n\t\tdateWraper.appendChild(dateTime);\r\n\t\tmedWrapper.appendChild(dateWraper);\r\n\r\n\t\tif(itemConfig.hasOwnProperty(\"address\")){\r\n\t\t\tvar addressWrapper = document.createElement(\"span\");\r\n\t\t\taddressWrapper.classList.add(\"address-wrapper\");\r\n\r\n\t\t\tif( itemConfig.address.hasOwnProperty(\"name\") ){\r\n\t\t\t\tvar addressNameText = document.createTextNode(itemConfig.address.name),\r\n\t\t\t\t\taddressName =  document.createElement(\"span\");\r\n\t\t\t\taddressName.classList.add(\"event-address\");\r\n\t\t\t\taddressName.classList.add(\"event-address-name\");\r\n\t\t\t\taddressName.appendChild(addressNameText);\r\n\t\t\t\taddressWrapper.appendChild(addressName);\r\n\t\t\t}\r\n\r\n\t\t\tif( itemConfig.address.hasOwnProperty(\"line1\") ){\r\n\t\t\t\tvar addressOneText = document.createTextNode(itemConfig.address.line1),\r\n\t\t\t\t\taddressOne =  document.createElement(\"span\");\r\n\t\t\t\taddressOne.classList.add(\"event-address\");\r\n\t\t\t\taddressOne.appendChild(addressOneText);\r\n\t\t\t\taddressWrapper.appendChild(addressOne);\r\n\t\t\t}\r\n\r\n\t\t\tif( itemConfig.address.hasOwnProperty(\"line2\") ){\r\n\t\t\t\tvar addressTwoText = document.createTextNode(itemConfig.address.line2),\r\n\t\t\t\t\taddressTwo =  document.createElement(\"span\");\r\n\t\t\t\taddressTwo.classList.add(\"event-address\");\r\n\t\t\t\taddressTwo.appendChild(addressTwoText);\r\n\t\t\t\taddressWrapper.appendChild(addressTwo);\r\n\t\t\t}\r\n\r\n\t\t\tmedWrapper.appendChild(addressWrapper);\r\n\t\t}\r\n\r\n\t\tif(itemConfig.hasOwnProperty(\"categories\")) {\r\n\t\t\tvar categoriesWrapper = document.createElement(\"span\");\r\n\t\t\tcategoriesWrapper.classList.add(\"category-wrapper\");\r\n\r\n\t\t\titemConfig.categories.forEach(function (element) {\r\n\t\t\t\tvar categoryText = document.createTextNode(element),\r\n\t\t\t\t\tcategory = document.createElement(\"span\");\r\n\t\t\t\tcategory.classList.add(\"event-category\");\r\n\t\t\t\tcategory.appendChild(categoryText);\r\n\t\t\t\tcategoriesWrapper.appendChild(category);\r\n\t\t\t});\r\n\t\t\tmedWrapper.appendChild(categoriesWrapper);\r\n\t\t}\r\n\r\n\t\tevent.appendChild(medWrapper);\r\n\r\n\t\treturn event;\r\n\t}\r\n\r\n\t/*\r\n   * Config block\r\n   */\r\n\t/*\r\n  decConfig(config){\r\n    return JSON.parse(window.atob(config));\r\n  }\r\n  encConfig(config){\r\n    return window.btoa(config);\r\n  }\r\n  */\r\n\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./products-and-docs/widgets/countdown/1.0.0/src/classes/TicketmasterCountdownWidget.js\n// module id = 2\n// module chunks = 0","import CountdownClock from './classes/CountdownClock';\r\nimport TicketmasterCountdownWidget from './classes/TicketmasterCountdownWidget';\r\n\r\nimport widgetAnalytics from '../../../helpers/widgets-analytics';\r\n\r\nwidgetAnalytics.initialize(widgetAnalytics.EVENT_CATEGORY.COUNTDOWN_WIDGET);\r\n\r\nlet widgetsCountdown = [];\r\n(function () {\r\n  let widgetContainers = document.querySelectorAll(\"div[w-type='countdown']\");\r\n  for (let i = 0; i < widgetContainers.length; ++i) {\r\n    widgetsCountdown.push(new TicketmasterCountdownWidget(widgetContainers[i]));\r\n  }\r\n\r\n})();\r\n\r\nif(typeof module !== \"undefined\") {\r\n    module.exports = { CountdownClock , TicketmasterCountdownWidget , widgetsCountdown };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// products-and-docs/widgets/countdown/1.0.0/src/main-widget.es6"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;ACjGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACxCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACh2BA;AACA;;;AAAA;AACA;;;AACA;AACA;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;A","sourceRoot":""}